define("mockup-i18n",["jquery"],function(a){"use strict";return function(){var s=this;s.baseUrl=a("body").attr("data-i18ncatalogurl"),s.baseUrl||(s.baseUrl="/plonejsi18n"),s.currentLanguage=a("html").attr("lang")||"en",1<s.currentLanguage.split("-").length&&(s.currentLanguage=s.currentLanguage.split("-")[0]+"_"+s.currentLanguage.split("-")[1].toUpperCase()),s.storage=null,s.catalogs={},s.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(s.storage=window.localStorage)}catch(e){}s.configure=function(e){for(var t in e)s[t]=e[t]},s._setCatalog=function(e,t,n){e in s.catalogs||(s.catalogs[e]={}),s.catalogs[e][t]=n},s._storeCatalog=function(e,t,n){var r=e+"-"+t;null!==s.storage&&null!==n&&(s.storage.setItem(r,JSON.stringify(n)),s.storage.setItem(r+"-updated",Date.now()))},s.getUrl=function(e,t){return s.baseUrl+"?domain="+e+"&language="+t},s.loadCatalog=function(t,n){if(void 0===n&&(n=s.currentLanguage),null!==s.storage){var e=t+"-"+n;if(e in s.storage&&Date.now()-parseInt(s.storage.getItem(e+"-updated"),10)<s.ttl){var r=JSON.parse(s.storage.getItem(e));return void s._setCatalog(t,n,r)}}a.getJSON(s.getUrl(t,n),function(e){null!==e&&(s._setCatalog(t,n,e),s._storeCatalog(t,n,e))})},s.MessageFactory=function(o,i){return i=i||s.currentLanguage,function(e,t){var n,r,a;if(n=o in s.catalogs&&i in s.catalogs[o]&&e in s.catalogs[o][i]?s.catalogs[o][i][e]:e,t)for(a in t)t.hasOwnProperty(a)&&(r=new RegExp("\\$\\{"+a+"\\}","g"),n=n.replace(r,t[a]));return n}}}}),define("translate",["mockup-i18n"],function(r){"use strict";var a=null;return function(e,t){if(null===a){var n=new r;n.loadCatalog("widgets"),a=n.MessageFactory("widgets")}return a(e,t)}}),define("text",["module"],function(e){"use strict";var u,a,i,s,l,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),f=c&&location.hostname,g=c&&(location.port||void 0),p={},v=e.config&&e.config()||{};function m(e,t){return void 0===e||""===e?t:e}return u={version:"2.0.15",strip:function(e){if(e){var t=(e=e.replace(n,"")).match(o);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:v.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(e){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,a=!1,o=e.lastIndexOf("."),i=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!i||1<o)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,-1!==(o=(r=n||t).indexOf("!"))&&(a="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var a,o,i,s=u.xdRegExp.exec(e);return!s||(a=s[2],i=(o=(o=s[3]).split(":"))[1],o=o[0],(!a||a===t)&&(!o||o.toLowerCase()===n.toLowerCase())&&(!i&&!o||function(e,t,n,r){if(t===r)return!0;if(e===n){if("http"===e)return m(t,"80")===m(r,"80");if("https"===e)return m(t,"443")===m(r,"443")}return!1}(a,i,t,r)))},finishLoad:function(e,t,n,r){n=t?u.strip(n):n,v.isBuild&&(p[e]=n),r(n)},load:function(t,e,n,r){if(r&&r.isBuild&&!r.inlineText)n();else{v.isBuild=r&&r.isBuild;var a=u.parseName(t),o=a.moduleName+(a.ext?"."+a.ext:""),i=e.toUrl(o),s=v.useXhr||u.useXhr;0!==i.indexOf("empty:")?!c||s(i,d,f,g)?u.get(i,function(e){u.finishLoad(t,a.strip,e,n)},function(e){n.error&&n.error(e)}):e([o],function(e){u.finishLoad(a.moduleName+"."+a.ext,a.strip,e,n)}):n()}},write:function(e,t,n,r){if(p.hasOwnProperty(t)){var a=u.jsEscape(p[t]);n.asModule(e+"!"+t,"define(function () { return '"+a+"';});\n")}},writeFile:function(n,e,t,r,a){var o=u.parseName(e),i=o.ext?"."+o.ext:"",s=o.moduleName+i,l=t.toUrl(o.moduleName+i)+".js";u.load(s,t,function(e){var t=function(e){return r(l,e)};t.asModule=function(e,t){return r.asModule(e,l,t)},u.write(n,s,t,a)},a)}},"node"===v.env||!v.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(a=require.nodeRequire("fs"),u.get=function(e,t,n){try{var r=a.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(e){n&&n(e)}}):"xhr"===v.env||!v.env&&u.createXhr()?u.get=function(r,a,o,e){var t,i=u.createXhr();if(i.open("GET",r,!0),e)for(t in e)e.hasOwnProperty(t)&&i.setRequestHeader(t.toLowerCase(),e[t]);v.onXhr&&v.onXhr(i,r),i.onreadystatechange=function(e){var t,n;4===i.readyState&&(399<(t=i.status||0)&&t<600?((n=new Error(r+" HTTP status: "+t)).xhr=i,o&&o(n)):a(i.responseText),v.onXhrComplete&&v.onXhrComplete(i,r))},i.send(null)}:"rhino"===v.env||!v.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?u.get=function(e,t){var n,r,a=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),i=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,(r=i.readLine())&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=i.readLine());)n.append(o),n.append(r);s=String(n.toString())}finally{i.close()}t(s)}:("xpconnect"===v.env||!v.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),l="@mozilla.org/windows-registry-key;1"in i,u.get=function(e,t){var n,r,a,o={};l&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{(n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream)).init(a,1,0,!1),(r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream)).init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),t(o.value)}catch(e){throw new Error((a&&a.path||"")+": "+e)}}),u}),define("text!collective-venue-url/locationsearch.xml",[],function(){return'<button class="locationsearch btn btn-success"><%- _t("Search address in map") %></button>\n'}),define("collective-venue",["jquery","pat-base","translate","text!collective-venue-url/locationsearch.xml"],function(s,e,l,t){"use strict";return e.extend({name:"collective-venue-locationsearch",trigger:".geolocation_wrapper.edit",parser:"mockup",init:function(){var e=_.template(t)({_t:l});this.$el.prepend(e),s("button.locationsearch",this.$el).on("click",function(e){e.preventDefault();var t=this.$el.closest("form"),n=s("input#form-widgets-IBasic-title",t).val(),r=s("input#form-widgets-IAddress-street",t).val(),a=s("input#form-widgets-IAddress-zip_code",t).val(),o=s("input#form-widgets-IAddress-city",t).val(),i=s("select#form-widgets-IAddress-country option:selected",t).text();s.ajax("@@locationsearch",{dataType:"json",data:{title:n,street:r,zip_code:a,city:o,country:i}}).done(function(e){e.latitude&&e.longitude?(s("input.latitude",this.$el).val(e.latitude).trigger("change"),s("input.longitude",this.$el).val(e.longitude).trigger("change")):window.alert(l("Could not find an address."))}.bind(this))}.bind(this))}})}),require(["pat-registry","collective-venue"],function(e){}),define("/Users/cekk/work/rer/regione-er-5/src/collective.venue/collective/venue/resources/collective-venue-bundle.js",function(){});
//# sourceMappingURL=collective-venue-bundle-compiled.js.map
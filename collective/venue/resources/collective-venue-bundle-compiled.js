(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&b<=y};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;if(d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&d!==-1)return a[d]},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d<f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);g<h;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;j<k;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);d<e;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;g<c&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;d<b;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a||(A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length)},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}).call(this),function(){function a(){}function b(){}function c(a,b){this._loggers={},this.name=a||"",this._parent=b||null,b||(this._enabled=!0,this._level=h.WARN)}function d(){return g}function e(a){g=a}Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var f,g,h={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};a.prototype={output:function(a,b,c){if("undefined"!=typeof window.console&&"undefined"!=typeof console.log){a&&c.unshift(a+":");var d=c.join(" ");if(void 0===typeof console.info){var e;e=b<=h.DEBUG?"DEBUG":b<=h.INFO?"INFO":b<=h.WARN?"WARN":b<=h.ERROR?"ERROR":"FATAL",console.log("["+e+"] "+d)}else b<=h.DEBUG?(d="[DEBUG] "+d,console.log(d)):b<=h.INFO?console.info(d):b<=h.WARN?console.warn(d):console.error(d)}}},b.prototype={output:function(a,b,c){a&&c.unshift(a+":"),b<=h.DEBUG?(c.unshift("[DEBUG]"),console.log.apply(console,c)):b<=h.INFO?console.info.apply(console,c):b<=h.WARN?console.warn.apply(console,c):console.error.apply(console,c)}},c.prototype={getLogger:function(a){for(var b=a.split("."),d=this,e=this.name?[this.name]:[];b.length;){var f=b.shift();e.push(f),f in d._loggers||(d._loggers[f]=new c(e.join("."),d)),d=d._loggers[f]}return d},_getFlag:function(a){var b=this;for(a="_"+a;null!==b;){if(void 0!==b[a])return b[a];b=b._parent}return null},setEnabled:function(a){this._enabled=!!a},isEnabled:function(){this._getFlag("enabled")},setLevel:function(a){"number"==typeof a?this._level=a:"string"==typeof a&&(a=a.toUpperCase(),a in h&&(this._level=h[a]))},getLevel:function(){return this._getFlag("level")},log:function(a,b){!b.length||!this._getFlag("enabled")||a<this._getFlag("level")||(b=Array.prototype.slice.call(b),g.output(this.name,a,b))},debug:function(){this.log(h.DEBUG,arguments)},info:function(){this.log(h.INFO,arguments)},warn:function(){this.log(h.WARN,arguments)},error:function(){this.log(h.ERROR,arguments)},fatal:function(){this.log(h.FATAL,arguments)}},e(window.console&&window.console.log&&"function"==typeof window.console.log.apply?new b:new a),f=new c;for(var i,j=/loglevel(|-[^=]+)=([^&]+)/g;null!==(i=j.exec(window.location.search));){var k=""===i[1]?f:f.getLogger(i[1].slice(1));k.setLevel(i[2].toUpperCase())}var l={Level:h,getLogger:f.getLogger.bind(f),setEnabled:f.setEnabled.bind(f),isEnabled:f.isEnabled.bind(f),setLevel:f.setLevel.bind(f),getLevel:f.getLevel.bind(f),debug:f.debug.bind(f),info:f.info.bind(f),warn:f.warn.bind(f),error:f.error.bind(f),fatal:f.fatal.bind(f),getWriter:d,setWriter:e};"function"==typeof define?define("logging",[],function(){return l}):window.logging=l}(),define("pat-logger",["logging"],function(a){var b=a.getLogger("patterns");return b}),function(a){"function"==typeof define&&define.amd?define("jquery.browser",["jquery"],function(b){return a(b)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){"use strict";function b(a){void 0===a&&(a=window.navigator.userAgent),a=a.toLowerCase();var b=/(edge)\/([\w.]+)/.exec(a)||/(opr)[\/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[],c=/(ipad)/.exec(a)||/(ipod)/.exec(a)||/(iphone)/.exec(a)||/(kindle)/.exec(a)||/(silk)/.exec(a)||/(android)/.exec(a)||/(windows phone)/.exec(a)||/(win)/.exec(a)||/(mac)/.exec(a)||/(linux)/.exec(a)||/(cros)/.exec(a)||/(playbook)/.exec(a)||/(bb)/.exec(a)||/(blackberry)/.exec(a)||[],d={},e={browser:b[5]||b[3]||b[1]||"",version:b[2]||b[4]||"0",versionNumber:b[4]||b[2]||"0",platform:c[0]||""};if(e.browser&&(d[e.browser]=!0,d.version=e.version,d.versionNumber=parseInt(e.versionNumber,10)),e.platform&&(d[e.platform]=!0),(d.android||d.bb||d.blackberry||d.ipad||d.iphone||d.ipod||d.kindle||d.playbook||d.silk||d["windows phone"])&&(d.mobile=!0),(d.cros||d.mac||d.linux||d.win)&&(d.desktop=!0),(d.chrome||d.opr||d.safari)&&(d.webkit=!0),d.rv||d.edge){var f="msie";e.browser=f,d[f]=!0}if(d.safari&&d.blackberry){var g="blackberry";e.browser=g,d[g]=!0}if(d.safari&&d.playbook){var h="playbook";e.browser=h,d[h]=!0}if(d.bb){var i="blackberry";e.browser=i,d[i]=!0}if(d.opr){var j="opera";e.browser=j,d[j]=!0}if(d.safari&&d.android){var k="android";e.browser=k,d[k]=!0}if(d.safari&&d.kindle){var l="kindle";e.browser=l,d[l]=!0}if(d.safari&&d.silk){var m="silk";e.browser=m,d[m]=!0}return d.name=e.browser,d.platform=e.platform,d}return window.jQBrowser=b(window.navigator.userAgent),window.jQBrowser.uaMatch=b,a&&(a.browser=window.jQBrowser),window.jQBrowser}),define("pat-utils",["jquery","underscore","jquery.browser"],function(a,b){function c(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}}function d(a){var b=typeof a;return"function"===b||"object"===b&&!!a}function e(a){if(!d(a))return a;for(var b,c,e=1,f=arguments.length;e<f;e++){b=arguments[e];for(c in b)hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function f(a,b){return b.indexOf("://")!==-1||"/"===b[0]?b:a.slice(0,a.lastIndexOf("/")+1)+b}function g(b){for(var c,d=b.parentNode;d&&11!==d.nodeType;d=d.parentNode)if("LABEL"===d.tagName)return d;return b.id&&(c=a('label[for="'+b.id+'"]')),c&&0===c.length&&b.form&&(c=a('label[for="'+b.name+'"]',b.form)),c&&c.length?c[0]:null}function h(a){var b=a.getBoundingClientRect(),c=document.documentElement,d=window.innerWidth||c.clientWidth,e=window.innerHeight||c.clientHeight;return!(b.right<0||b.bottom<0||b.left>d||b.top>e)}function i(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function j(b,c){if(c.indexOf("*")===-1)b.removeClass(c);else{var d=c.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");d=d.replace(/[*]/g,".*"),d=new RegExp("^"+d+"$"),b.filter("[class]").each(function(){for(var b=a(this),c=b.attr("class").split(/\s+/),e=[],f=0;f<c.length;f++)d.test(c[f])||e.push(c[f]);e.length?b.attr("class",e.join(" ")):b.removeAttr("class")})}}function k(a,b,c,d){var e="css"===c.transition||"none"===c.transition?null:c.effect.duration;a.removeClass("visible hidden in-progress");var f=function(){a.removeClass("in-progress").addClass(b?"visible":"hidden").trigger("pat-update",{pattern:d,transition:"complete"})};if(e){var g=r[c.transition];a.addClass("in-progress").trigger("pat-update",{pattern:d,transition:"start"}),a[b?g.show:g.hide]({duration:e,easing:c.effect.easing,complete:f})}else"css"!==c.transition&&a[b?"show":"hide"](),f()}function l(a,b,c){var d=new RegExp("(\\?|\\&)"+b+"=.*?(?=(&|$))"),e=a.toString().split("#"),f=e[0],g=e[1],h=/\?.+$/,i=f;return i=d.test(f)?f.replace(d,"$1"+b+"="+c):h.test(f)?f+"&"+b+"="+c:f+"?"+b+"="+c,g&&(i+="#"+g),i}function m(a){var c=function(a,b){return this[b]===a};return b.reduce(a,function(a,d){var e=!1;return b.each(a,function(a){e=b.keys(a).length===b.keys(d).length&&!b.chain(a).omit(c.bind(d)).keys().value().length}),e||a.push(d),a},[])}function n(c,d){for(var e=[],f=0;f<d;f++)e.push({});return b.each(c,function(b){for(var c=b.length-1,f=0;f<d;f++)e[f]=a.extend(e[f]||{},b[f>c?c:f])}),e}a.fn.safeClone=function(){var b=this.clone();return void 0!==a.browser.msie&&b.findInclusive(":input[placeholder]").each(function(b,c){var d=a(c);d.attr("placeholder")===d.val()&&d.val("")}),b},Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null===this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;d<f;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}});var o=function(b,c,d){var e=this;return e.each(function(){var e,f=a(this);if(e=b.init(f,d),c){if(void 0===e[c])return a.error("Method "+c+" does not exist on jQuery."+b.name),!1;if("_"===c.charAt(0))return a.error("Method "+c+" is private on jQuery."+b.name),!1;e[c].apply(e,[d])}}),e},p=function(b,c,d){var e=this;if(c){if(b[c])return b[c].apply(e,[e].concat([d]));a.error("Method "+c+" does not exist on jQuery."+b.name)}else b.init.apply(e,[e].concat([d]));return e},q=function(a){return function(b,c){var d=this;return 0===d.length?d:("object"==typeof b&&(c=b,b=void 0),"function"==typeof a?o.call(this,a,b,c):p.call(this,a,b,c))}},r={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}};isElementInViewport=function(c,d,e){if(c===[])return!1;c instanceof a&&(c=c[0]);var f=c.getBoundingClientRect(),g=[f.top,f.bottom,f.left,f.right];return!b.every(g,function(a){if(0===a)return!0})&&(d?(void 0===e&&(e=0),f.top<=0+e&&f.bottom>=0+e):f.top>=0&&f.left>=0&&f.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&f.right<=(window.innerWidth||document.documentElement.clientWidth))};var s={jqueryPlugin:q,debounce:c,escapeRegExp:i,isObject:d,extend:e,rebaseURL:f,findLabel:g,elementInViewport:h,removeWildcardClass:j,hideOrShow:k,addURLQueryParameter:l,removeDuplicateObjects:m,mergeStack:n,isElementInViewport:isElementInViewport};return s}),define("pat-compat",[],function(){Array.prototype.every||(Array.prototype.every=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments[1],e=0;e<c;e++)if(e in b&&!a.call(d,b[e],e,b))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null===this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("[object Function]"!=={}.toString.call(a))throw new TypeError(a+" is not a function");for(b&&(c=b),d=0;d<f;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d))));for(var e=d>=0?Math.min(d,c-1):c-Math.abs(d);e>=0;e--)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null===this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("[object Function]"!=={}.toString.call(a))throw new TypeError(a+" is not a function");for(b&&(c=b),d=new Array(g),e=0;e<g;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a){if(null===this||void 0===this)throw new TypeError("Object is null or undefined");var b,c=0,d=this.length>>0;if("function"!=typeof a)throw new TypeError("First argument is not callable");if(arguments.length<2){if(0===d)throw new TypeError("Array length is 0 and no second argument");b=this[0],c=1}else b=arguments[1];for(;c<d;)c in this&&(b=a.call(void 0,b,this[c],c,this)),++c;return b}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;if(0===c&&1===arguments.length)throw new TypeError;var d,e=c-1;if(arguments.length>=2)d=arguments[1];else for(;;){if(e in this){d=this[e--];break}if(--e<0)throw new TypeError}for(;e>=0;)e in b&&(d=a.call(void 0,d,b[e],e,b)),e--;return d}),Array.prototype.some||(Array.prototype.some=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments[1],e=0;e<c;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}())}),define("pat-jquery-ext",["jquery"],function(a){var b={init:function(c){var d={time:3,initialTime:8,exceptionAreas:[]};return this.each(function(){var e=a(this),f=e.data("timeout");f||(c&&a.extend(d,c),e.data("timeout",{lastEvent:new Date,trueTime:d.time,time:d.initialTime,untouched:!0,inExceptionArea:!1}),e.bind("mouseover.timeout",b.mouseMoved),e.bind("mouseenter.timeout",b.mouseMoved),a(d.exceptionAreas).each(function(){e.find(this).live("mouseover.timeout",{parent:e},b.enteredException).live("mouseleave.timeout",{parent:e},b.leftException)}),d.initialTime>0?e.timeout("startTimer"):e.addClass("timeout"))})},enteredException:function(a){var b=a.data.parent.data("timeout");b.inExceptionArea=!0,a.data.parent.data("timeout",b),a.data.parent.trigger("mouseover")},leftException:function(a){var b=a.data.parent.data("timeout");b.inExceptionArea=!1,a.data.parent.data("timeout",b)},destroy:function(){return this.each(function(){var b=a(this),c=b.data("timeout");a(window).unbind(".timeout"),c.timeout.remove(),b.removeData("timeout")})},mouseMoved:function(){var b=a(this),c=b.data("timeout");b.hasClass("timeout")?(b.removeClass("timeout"),b.timeout("startTimer")):c.untouched&&(c.untouched=!1,c.time=c.trueTime),c.lastEvent=new Date,b.data("timeout",c)},startTimer:function(){var b=a(this),c=b.data("timeout"),d=function(){var a=b.data("timeout");if(a&&a.lastEvent)if(a.inExceptionArea)setTimeout(d,Math.floor(1e3*a.time));else{var c=new Date,e=Math.floor(1e3*a.time)-(c-a.lastEvent);e>0?setTimeout(d,e+100):b.addClass("timeout")}};setTimeout(d,Math.floor(1e3*c.time))}};a.fn.timeout=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.timeout"):b.init.apply(this,arguments)},a.extend(a.expr[":"],{scrollable:function(b){var c,d;return"scroll"===a(b).css("overflow")||"scroll"===a(b).css("overflowX")||"scroll"===a(b).css("overflowY")||((c=b.clientHeight<b.scrollHeight&&(a.inArray(a(b).css("overflowY"),["scroll","auto"])!==-1||a.inArray(a(b).css("overflow"),["scroll","auto"])!==-1))||(d=b.clientWidth<b.scrollWidth&&(a.inArray(a(b).css("overflowX"),["scroll","auto"])!==-1||a.inArray(a(b).css("overflow"),["scroll","auto"])!==-1)));
}}),a.fn.makeVisibleInScroll=function(b){var c=null;return"string"==typeof b?c=a("#"+b):b&&(c=a(b)),this.each(function(){var b,d=a(this);c?b=c:(b=d.parents(":scrollable"),b=a(b.length>0?b[0]:window));var e=d.position().top,f=d.height()+e,g=b.scrollTop(),h=b.height()+g;e<g?b.scrollTop(e):f>h-b.height()/2&&b.scrollTop(e-(b.height()-d.height())/2)})},a.fn.setPositionAbsolute=function(b,c,d){return this.each(function(){var e=a(this),f=a(this).width(),g=b.offset(),h=b.width(),i=b.height(),j=g.left+h-f+d,k=g.top+i+c;e.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:j+"px",top:k+"px",width:f}),e.remove().appendTo("body").show()})},a.fn.positionAncestor=function(b){var c=0,d=0;return this.each(function(){var e=a(this).closest(b);if(e.length&&"static"!==e.css("position")){var f=a(this),g=f.offset().left-parseInt(f.css("marginLeft"),10),h=f.offset().top-parseInt(f.css("marginTop"),10),i=e.offset().left+parseInt(e.css("borderLeftWidth"),10),j=e.offset().top+parseInt(e.css("borderTopWidth"),10);return c=g-i,d=h-j,!1}}),{left:c,top:d}},String.prototype.startsWith=function(a){return null!==this.match("^"+a)},String.prototype.endsWith=function(a){return null!==this.match(a+"$")},a.simplePlaceholder={placeholder_class:null,hide_placeholder:function(){var b=a(this);b.val()===b.attr("placeholder")&&b.val("").removeClass(a.simplePlaceholder.placeholder_class)},show_placeholder:function(){var b=a(this);""===b.val()&&b.val(b.attr("placeholder")).addClass(a.simplePlaceholder.placeholder_class)},prevent_placeholder_submit:function(){return a(this).find(".simple-placeholder").each(function(){var b=a(this);b.val()===b.attr("placeholder")&&b.val("")}),!0}},a.fn.simplePlaceholder=function(b){if(void 0===document.createElement("input").placeholder){var c={placeholder_class:"placeholding"};b&&a.extend(c,b),a.simplePlaceholder.placeholder_class=c.placeholder_class,this.each(function(){var b=a(this);b.focus(a.simplePlaceholder.hide_placeholder),b.blur(a.simplePlaceholder.show_placeholder),""===b.val()&&(b.val(b.attr("placeholder")),b.addClass(a.simplePlaceholder.placeholder_class)),b.addClass("simple-placeholder"),a(this.form).submit(a.simplePlaceholder.prevent_placeholder_submit)})}return this},a.fn.findInclusive=function(a){return this.find("*").addBack().filter(a)},a.fn.slideIn=function(a,b,c){return this.animate({width:"show"},a,b,c)},a.fn.slideOut=function(a,b,c){return this.animate({width:"hide"},a,b,c)},a.expr[":"].Contains=function(b,c,d){return a(b).text().toUpperCase().indexOf(d[3].toUpperCase())>=0},a.fn.scopedFind=function(b){return b.startsWith("#")?a(b):this.find(b)}}),define("pat-registry",["jquery","underscore","pat-logger","pat-utils","pat-compat","pat-jquery-ext"],function(a,b,c,d){for(var e,f=c.getLogger("registry"),g=/patterns-disable=([^&]+)/g,h=/patterns-dont-catch/g,i=!1,j={};null!==(e=g.exec(window.location.search));)j[e[1]]=!0,f.info("Pattern disabled via url config:",e[1]);for(;null!==(e=h.exec(window.location.search));)i=!0,f.info("I will not catch init exceptions");var k={patterns:{},initialized:!1,init:function(){a(document).ready(function(){f.info("loaded: "+Object.keys(k.patterns).sort().join(", ")),k.scan(document.body),k.initialized=!0,f.info("finished initial scan.")})},clear:function(){this.patterns={}},transformPattern:function(b,c){if(j[b])return void f.debug("Skipping disabled pattern:",b);var d=k.patterns[b];if(d.transform)try{d.transform(a(c))}catch(e){if(i)throw e;f.error("Transform error for pattern"+b,e)}},initPattern:function(b,d,e){var f=a(d),g=k.patterns[b];if(g.init&&(plog=c.getLogger("pat."+b),f.is(g.trigger))){plog.debug("Initialising:",f);try{g.init(f,null,e),plog.debug("done.")}catch(h){if(i)throw h;plog.error("Caught error:",h)}}},orderPatterns:function(a){return b.contains(a,"validation")&&b.contains(a,"inject")&&(a.splice(a.indexOf("validation"),1),a.unshift("validation")),a},scan:function(c,d,e){var f,g=[];d=this.orderPatterns(d||Object.keys(k.patterns)),d.forEach(b.partial(this.transformPattern,b,c)),d=b.each(d,function(a){var b=k.patterns[a];b.trigger&&g.unshift(b.trigger)}),f=a(c).findInclusive(g.join(",")),f=f.filter(function(){return 0===a(this).parents("pre").length}),f=f.filter(":not(.cant-touch-this)"),f.toArray().reduceRight(function(a,c){d.forEach(b.partial(this.initPattern,b,c,e))}.bind(this),null),a("body").addClass("patterns-loaded")},register:function(b,c){var e;return(c=c||b.name)?k.patterns[c]?(f.error("Already have a pattern called: "+c),!1):(k.patterns[c]=b,b.jquery_plugin&&(e=("pat-"+c).replace(/-([a-zA-Z])/g,function(a,b){return b.toUpperCase()}),a.fn[e]=d.jqueryPlugin(b),a.fn[e.replace(/^pat/,"pattern")]=a.fn[e]),f.debug("Registered pattern:",c,b),k.initialized&&k.scan(document.body,[c]),!0):(f.error("Pattern lacks a name:",b),!1)}};return k}),define("pat-mockup-parser",["jquery"],function(a){"use strict";var b={getOptions:function c(b,d,e){e=e||{},0===b.length||a.nodeName(b[0],"body")||(e=c(b.parent(),d,e));var f={};if(0!==b.length&&(f=b.data("pat-"+d),f&&"string"==typeof f)){var g={};a.each(f.split(";"),function(a,b){b=b.split(":"),b.reverse();var c=b.pop();c=c.replace(/^\s+|\s+$/g,""),b.reverse();var d=b.join(":");d=d.replace(/^\s+|\s+$/g,""),g[c]=d}),f=g}return a.extend(!0,{},e,f)}};return b}),define("pat-base",["jquery","pat-registry","pat-mockup-parser","pat-logger"],function(a,b,c,d){"use strict";var e=d.getLogger("Patternslib Base"),f=function(a,e,f){var g=this.prototype.name,h=d.getLogger("pat."+g),i=a.data("pattern-"+g);if(void 0===i&&b.patterns[g]){try{e="mockup"===this.prototype.parser?c.getOptions(a,g,e):e,i=new b.patterns[g](a,e,f)}catch(j){h.error("Failed while initializing '"+g+"' pattern.",j)}a.data("pattern-"+g,i)}return i},g=function(b,c,d){this.$el=b,this.options=a.extend(!0,{},this.defaults||{},c||{}),this.init(b,c,d),this.emit("init")};return g.prototype={constructor:g,on:function(a,b){this.$el.on(a+"."+this.name+".patterns",b)},emit:function(a,b){void 0===b&&(b=[]),this.$el.trigger(a+"."+this.name+".patterns",b)}},g.extend=function(c){var d,h=this;if(!c)throw new Error("Pattern configuration properties required when calling Base.extend");d=c.hasOwnProperty("constructor")?c.constructor:function(){h.apply(this,arguments)},d.extend=g.extend,d.init=f,d.jquery_plugin=!0,d.trigger=c.trigger;var i=function(){this.constructor=d};return i.prototype=h.prototype,d.prototype=new i,a.extend(!0,d.prototype,c),d.__super__=h.prototype,c.name?c.trigger?b.register(d,c.name):e.warn("The pattern '"+c.name+"' does not have a trigger attribute, it will not be registered."):e.warn("This pattern without a name attribute will not be registered!"),d},g}),define("mockup-i18n",["jquery"],function(a){"use strict";var b=function(){var b=this;b.baseUrl=a("body").attr("data-i18ncatalogurl"),b.baseUrl||(b.baseUrl="/plonejsi18n"),b.currentLanguage=a("html").attr("lang")||"en-us",b.storage=null,b.catalogs={},b.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(b.storage=window.localStorage)}catch(c){}b.configure=function(a){for(var c in a)b[c]=a[c]},b._setCatalog=function(a,c,d){a in b.catalogs?b.catalogs[a][c]=d:(b.catalogs[a]={},b.catalogs[a][c]=d)},b._storeCatalog=function(a,c,d){var e=a+"-"+c;null!==b.storage&&null!==d&&(b.storage.setItem(e,JSON.stringify(d)),b.storage.setItem(e+"-updated",Date.now()))},b.getUrl=function(a,c){return b.baseUrl+"?domain="+a+"&language="+c},b.loadCatalog=function(c,d){if(void 0===d&&(d=b.currentLanguage),null!==b.storage){var e=c+"-"+d;if(e in b.storage&&Date.now()-parseInt(b.storage.getItem(e+"-updated"),10)<b.ttl){var f=JSON.parse(b.storage.getItem(e));return void b._setCatalog(c,d,f)}}a.getJSON(b.getUrl(c,d),function(a){null!==a&&(b._setCatalog(c,d,a),b._storeCatalog(c,d,a))})},b.MessageFactory=function(a,c){return c=c||b.currentLanguage,function(d,e){var f;if(f=a in b.catalogs&&c in b.catalogs[a]&&d in b.catalogs[a][c]?b.catalogs[a][c][d]:d,e){var g,h;for(h in e)e.hasOwnProperty(h)&&(g=new RegExp("\\$\\{"+h+"\\}","g"),f=f.replace(g,e[h]))}return f}}};return b}),define("translate",["mockup-i18n"],function(a){"use strict";var b=null;return function(c,d){if(null===b){var e=new a;e.loadCatalog("widgets"),b=e.MessageFactory("widgets")}return b(c,d)}}),define("text",["module"],function(a){"use strict";function b(a,b){return void 0===a||""===a?b:a}function c(a,c,d,e){if(c===e)return!0;if(a===d){if("http"===a)return b(c,"80")===b(e,"80");if("https"===a)return b(c,"443")===b(e,"443")}return!1}var d,e,f,g,h,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],j=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,k=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,m=l&&location.protocol&&location.protocol.replace(/\:/,""),n=l&&location.hostname,o=l&&(location.port||void 0),p={},q=a.config&&a.config()||{};return d={version:"2.0.15",strip:function(a){if(a){a=a.replace(j,"");var b=a.match(k);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:q.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;b<3;b+=1){c=i[b];try{a=new ActiveXObject(c)}catch(d){}if(a){i=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.lastIndexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return f!==-1&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1)):b=a,d=c||b,f=d.indexOf("!"),f!==-1&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,e,f){var g,h,i,j=d.xdRegExp.exec(a);return!j||(g=j[2],h=j[3],h=h.split(":"),i=h[1],h=h[0],(!g||g===b)&&(!h||h.toLowerCase()===e.toLowerCase())&&(!i&&!h||c(g,i,b,f)))},finishLoad:function(a,b,c,e){c=b?d.strip(c):c,q.isBuild&&(p[a]=c),e(c)},load:function(a,b,c,e){if(e&&e.isBuild&&!e.inlineText)return void c();q.isBuild=e&&e.isBuild;var f=d.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=b.toUrl(g),i=q.useXhr||d.useXhr;return 0===h.indexOf("empty:")?void c():void(!l||i(h,m,n,o)?d.get(h,function(b){d.finishLoad(a,f.strip,b,c)},function(a){c.error&&c.error(a)}):b([g],function(a){d.finishLoad(f.moduleName+"."+f.ext,f.strip,a,c)}))},write:function(a,b,c,e){if(p.hasOwnProperty(b)){var f=d.jsEscape(p[b]);c.asModule(a+"!"+b,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,b,c,e,f){var g=d.parseName(b),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=c.toUrl(g.moduleName+h)+".js";d.load(i,c,function(b){var c=function(a){return e(j,a)};c.asModule=function(a,b){return e.asModule(a,j,b)},d.write(a,i,c,f)},f)}},"node"===q.env||!q.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(e=require.nodeRequire("fs"),d.get=function(a,b,c){try{var d=e.readFileSync(a,"utf8");"\ufeff"===d[0]&&(d=d.substring(1)),b(d)}catch(f){c&&c(f)}}):"xhr"===q.env||!q.env&&d.createXhr()?d.get=function(a,b,c,e){var f,g=d.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);q.onXhr&&q.onXhr(g,a),g.onreadystatechange=function(d){var e,f;4===g.readyState&&(e=g.status||0,e>399&&e<600?(f=new Error(a+" HTTP status: "+e),f.xhr=g,c&&c(f)):b(g.responseText),q.onXhrComplete&&q.onXhrComplete(g,a))},g.send(null)}:"rhino"===q.env||!q.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?d.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===q.env||!q.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(f=Components.classes,g=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),h="@mozilla.org/windows-registry-key;1"in f,d.get=function(a,b){var c,d,e,i={};h&&(a=a.replace(/\//g,"\\")),e=new FileUtils.File(a);try{c=f["@mozilla.org/network/file-input-stream;1"].createInstance(g.nsIFileInputStream),c.init(e,1,0,!1),d=f["@mozilla.org/intl/converter-input-stream;1"].createInstance(g.nsIConverterInputStream),d.init(c,"utf-8",c.available(),g.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),d.readString(c.available(),i),d.close(),c.close(),b(i.value)}catch(j){throw new Error((e&&e.path||"")+": "+j)}}),d}),define("text!collective-venue-url/locationsearch.xml",[],function(){return'<button class="locationsearch btn btn-success"><%- _t("Search address in map") %></button>\n'}),define("collective-venue",["jquery","pat-base","translate","text!collective-venue-url/locationsearch.xml"],function(a,b,c,d){"use strict";var e=b.extend({name:"collective-venue-locationsearch",trigger:".geolocation_wrapper.edit",parser:"mockup",init:function(){var b=_.template(d)({_t:c});this.$el.prepend(b),a("button.locationsearch",this.$el).on("click",function(b){b.preventDefault();var d=this.$el.closest("form"),e=a("input#form-widgets-IBasic-title",d).val(),f=a("input#form-widgets-IAddress-street",d).val(),g=a("input#form-widgets-IAddress-zip_code",d).val(),h=a("input#form-widgets-IAddress-city",d).val(),i=a("select#form-widgets-IAddress-country option:selected",d).text();a.ajax("@@locationsearch",{dataType:"json",data:{title:e,street:f,zip_code:g,city:h,country:i}}).done(function(b){b.latitude&&b.longitude?(a("input.latitude",this.$el).val(b.latitude).trigger("change"),a("input.longitude",this.$el).val(b.longitude).trigger("change")):window.alert(c("Could not find an address."))}.bind(this))}.bind(this))}});return e}),require(["pat-registry","collective-venue"],function(a){"use strict";window.parent===window&&$(document).ready(function(){a.initialized||a.init()})}),define("/home/_thet/data/dev/plone/minimalplone5/src/collective.venue/collective/venue/resources/collective-venue-bundle.js",function(){});
//# sourceMappingURL=collective-venue-bundle-compiled.js.map